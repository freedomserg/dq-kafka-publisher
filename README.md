
KafkaPublisher reads records from a file generated by `RecordsFileProducer` and sends them to a Kafka topic.
 
KafkaPublisher accepts 5 arguments:
* bootstrapServers: Kafka brokers to connect to
* topic: Kafka topic to publish records to
* file: absolute file name to read from
* recordsPublishSessionSize: a number of records to send within a single session (like a single iteration of publishing)
* delayUntilNextSend: a time delay (in seconds) between subsequent publishing sessions

#### Note
KafkaPublisher reads a given file infinitely until the app is terminated explicitly by pressing `Ctrl+C`

## Setup

### Preconditions

-   Java >= 1.8
-   Scala >= 2.11
-   sbt >= 1.3.8

### Steps

#### 1. Get project code

`git clone git@github.com:freedomserg/dq-kafka-publisher.git`

#### 2. Execute a producer

In terminal:

-   Go to the project dir: `cd dq-kafka-publisher`
-   Build a jar file: `sbt clean assembly`
-   Run generated jar file:  `java -jar dq-kafka-gen.jar {bootstrapServers} {topic} {file} {recordsPublishSessionSize} {delayUntilNextSend}`

    Example: `java -jar dq-kafka-gen.jar localhost:9092 transactions /Users/foo/bar/weather-data.txt 10 5`

This would trigger reading records from a file and infinitely publishing them to Kafka until the app is terminated

#### Note
Don't pay attention in case you see the following error in the terminal on the application start up:

`SLF4J: Failed toString() invocation on an object of type [org.apache.kafka.clients.NodeApiVersions]
 Reported exception:
 java.lang.NullPointerException
 	at org.apache.kafka.clients.NodeApiVersions.apiVersionToText(NodeApiVersions.java:167)
 	...
 	`
 	
It's a Kafka library issue not affecting the application itself. 